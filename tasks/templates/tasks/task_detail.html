{% block content %}
    <h1 class="my-4">{{ task.title }}</h1>
    <p><strong>Status:</strong> {{ task.get_status_display }}</p>
    <p><strong>Description:</strong> {{ task.description }}</p>

    <h3>Subtasks</h3>
    <ul class="list-group">
        {% for subtask in task.subtasks.all %}
            <li class="list-group-item d-flex justify-content-between align-items-center">
                {{ subtask.title }}
                <span class="badge bg-secondary">{{ subtask.get_status_display }}</span>
            </li>
        {% endfor %}
    </ul>

    <h4 class="mt-4">Add Subtask</h4>
    <form id="subtaskForm">
        <div class="mb-3">
            <input type="text" class="form-control" id="subtaskTitle" placeholder="Subtask title">
        </div>
        <button type="submit" class="btn btn-secondary">Add Subtask</button>
    </form>

    <a href="{% url 'task_update' task.id %}" class="btn btn-warning mt-3">Edit Task</a>
    <a href="{% url 'task_delete' task.id %}" class="btn btn-danger mt-3">Delete Task</a>

    <script>
        document.getElementById('subtaskForm').addEventListener('submit', function(event) {
            event.preventDefault();
            let title = document.getElementById('subtaskTitle').value;
            if (title) {
                alert('Subtask "' + title + '" added!');
            }
        });
    </script>
{% endblock %}
